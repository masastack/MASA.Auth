@using Masa.Auth.Web.Sso.Pages.Account.Login.RegisterSections
@inherits SsoCompontentBase
@inject IJSRuntime _js

<MForm Model="_inputModel" @ref="_registerForm" EnableValidation class="mt-6 pt-6 px-12 text-center" Style="height: 430px; overflow: auto;">
    @foreach (var registerItem in _registerComponents.Values)
    {
        <DynamicComponent Type="@registerItem.ComponentType" Parameters="@registerItem.ComponentParameters" />
    }

    @*https://github.com/BlazorComponent/MASA.Blazor/issues/811*@
    <MRow NoGutters>
        <MCheckbox @bind-Value="_inputModel.Agreement" HideDetails="true" Label="@T("RegistrationAgreementStatement")" Class="mt-1">
        </MCheckbox>
        <MButton Plain OnClick="()=> _protocolModalVisible = true" Style="color:rgb(0,0,238);padding:0;">《@T("RegistrationAgreement")》</MButton>
    </MRow>
</MForm>
<div class="text-center mt-3">
    <MButton Class="rounded-pill text-btn white--text" Disabled=!CanRegister
             OnClick="RegisterHandler" Height=48 Width=340 Color="primary" Loading="_registerLoading">
        @T("Register")
    </MButton>
</div>
<ProtocolModal @bind-Visible="_protocolModalVisible" OnSuccess="()=> _inputModel.Agreement = true" />