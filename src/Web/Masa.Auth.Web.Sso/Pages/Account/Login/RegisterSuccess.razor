@page "/RegisteredSuccess"

@inherits SsoCompontentBase
@implements IDisposable
@layout SimpleLayout
@inject IJSRuntime _js

<MCard Width=510 Height=620>
    <MCardTitle Class="d-flex justify-center h4 my-12">
        @T("RegistrationSuccess") <MIcon Color="success">mdi-check-circle</MIcon>
    </MCardTitle>
    <MCardText>
        <MDivider>
            <span class="regular3--text caption" style="line-height: 1px !important">@T("ReplenishInfo")</span>
        </MDivider>
        <MForm Model="RegisterUser" @ref="_registerForm" EnableValidation class="mt-12 mx-12 text-center">
            <MTextField Style="width:200px;" @bind-Value="@RegisterUser.DisplayName" Class="mx-auto mb-4"></MTextField>
            @if (RegisterUser.EmailRegister)
            {
                <MTextField PrependInnerIcon="mdi-cellphone" @bind-Value="@RegisterUser.PhoneNumber" Label="@T("PhoneNumber")"
                        Placeholder="@T("PhoneNumberPlaceHolder")" Outlined Autofocus>
                </MTextField>
                <MTextField Class="mt-3" @bind-Value="@RegisterUser.SmsCode" Outlined Label="@T("SMSCode")"
                        Placeholder="@T("SMSCodePlaceHolder")" Type="number"
                        NumberProps="@(prop=> { prop.Min = 100000; prop.Max = 999999; prop.HideControl = true; })">
                    <AppendContent>
                        <MButton Style="margin-top:-16px;margin-right:-12px;height:54px;min-width: 120px;"
                             Class="primary rounded-r-lg" Disabled=!_canSmsCode OnClick="GetSmsCode">
                            @(_canSmsCode ? @T("GetSmsCode") : _smsCodeTime)
                        </MButton>
                    </AppendContent>
                </MTextField>
            }
            else
            {
                <MTextField @bind-Value="@RegisterUser.Password" Label="@T("Password")"
                        Type="@(_showPwd ? "text" : "password")" Placeholder="@T("PasswordPlaceHolder")"
                        AppendIcon="@(_showPwd ? "mdi-eye" : "mdi-eye-off")" OnAppendClick="()=>_showPwd = !_showPwd" Outlined>
                    <PrependInnerContent>
                        <MIcon>mdi-lock</MIcon>
                    </PrependInnerContent>
                </MTextField>
                <MTextField @bind-Value="@RegisterUser.ConfirmPassword" Class="mt-3" Label="@T("ConfirmPassword")"
                        Type="@(_showPwd ? "text" : "password")" Placeholder="@T("ConfirmPasswordPlaceHolder")"
                        AppendIcon="@(_showPwd ? "mdi-eye" : "mdi-eye-off")" OnAppendClick="()=>_showPwd = !_showPwd" Outlined>
                    <PrependInnerContent>
                        <MIcon>mdi-lock</MIcon>
                    </PrependInnerContent>
                </MTextField>
            }
        </MForm>
    </MCardText>
    <MCardActions Class="d-flex justify-center">
        <MButton Class="rounded-pill text-btn white--text" Height=48 Width=340 Color="primary"
                 OnClick="RegisterUserAsync" Loading=_registerLoading>
            @T("Sure")
        </MButton>
    </MCardActions>
</MCard>
