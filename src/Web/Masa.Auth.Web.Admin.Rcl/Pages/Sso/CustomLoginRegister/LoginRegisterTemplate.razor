@inherits AdminCompontentBase

<div class="d-flex">
    <div class="login ma-auto ml-5 px-12 pb-12" style="width:512px;max-height:660px;">
        <div class="d-flex">
            <MTabs @bind-Value="Tab" Class="mx-auto" Style="max-width: 329px !important;">
                <MTab Value="CustomLoginTab.Login">
                    <span class="font-18-medium @(Tab == CustomLoginTab.Login ?"emphasis2--text":"regular3--text")">@T(CustomLoginTab.Login)</span>
                </MTab>
                <MTab Value="CustomLoginTab.Register" Style="margin-left:130px">
                    <span class="font-18-medium @(Tab == CustomLoginTab.Register ?"emphasis2--text":"regular3--text")">@T(CustomLoginTab.Register)</span>
                </MTab>
            </MTabs>
        </div>
        <div class="mt-6">
            @if (Logo is not null)
            {
                <div class="d-flex mt-10">
                    <MAvatar Size=80 Class="mx-auto">
                        <img src="@Logo" />
                    </MAvatar>
                </div>
            }
            @if (string.IsNullOrEmpty(Title) is false)
            {
                <div class="d-flex">
                    <div class="mt-2 mx-auto font-18-medium emphasis2--text">@Title</div>
                </div>
            }
            <MTabsItems @bind-Value="Tab">
                <MTabItem Value="CustomLoginTab.Login">
                    <MForm Model=Login EnableValidation>
                        <DefaultTextField @bind-Value="Login.Account" Class="mt-10" Height="58" Label="@T(nameof(Login.Account))" />
                        <DefaultPassword @bind-Value="Login.Password" Class="mt-9" />
                        <div class="d-flex">
                            <MSpacer />
                            <span class="caption regular3--text">@T("Forgot password?")</span>
                        </div>
                        <div class="d-flex">
                            <MButton OnClick="() => context.Validate()" Class="large-button mt-11 mx-auto" Color="primary">
                                @T("Login")
                            </MButton>
                        </div>
                    </MForm>
                    @if (ThirdPartyIdps.Count > 0)
                    {
                        <div class="d-flex block-center mt-12">
                            <div style="background: #E9EDF7;height: 1px;width: 100%;" />
                            <div class="mx-4 text-center body2 regular3--text" style="@(I18n.CurrentLanguage=="zh-CN"?"min-width:100px":"min-width:80px")">@T("or login with")</div>
                            <div style="background: #E9EDF7;height: 1px;width: 100%;" />
                        </div>
                        <div class="mt-4 text-center">
                            @foreach (var thirdPartyIdp in ThirdPartyIdps)
                            {
                                <MAvatar Size="30" Class="ml-4">
                                    <img src="@thirdPartyIdp.Icon" />
                                </MAvatar>
                            }
                        </div>
                    }
                </MTabItem>
                <MTabItem Value="CustomLoginTab.Register">
                    <MForm Model=Register EnableValidation>
                        <div class="mt-10">
                            @foreach (var registerField in RegisterFields)
                            {
                                switch (registerField.RegisterFieldType)
                                {
                                    case RegisterFieldTypes.Account:
                                        <DefaultTextField @bind-Value="Register.Account" Label="@T(nameof(Register.Account))" Height="58" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.Password:
                                        <DefaultPassword @bind-Value="Register.Password" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.ConfirmPassword:
                                        <DefaultPassword @bind-Value="Register.ConfirmPassword" Label="@T(nameof(Register.ConfirmPassword))" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.Name:
                                        <DefaultTextField @bind-Value="Register.Name" Label="@T(nameof(Register.Name))" Height="58" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.DisplayName:
                                        <DefaultTextField @bind-Value="Register.DisplayName" Label="@T(nameof(Register.DisplayName))" Height="58" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.IdCard:
                                        <DefaultTextField @bind-Value="Register.IdCard" Label="@T(nameof(Register.IdCard))" Height="58" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.PhoneNumber:
                                        <DefaultTextField @bind-Value="Register.PhoneNumber" Label="@T(nameof(Register.PhoneNumber))" Height="58" Class="mb-6" />
                                        break;
                                    case RegisterFieldTypes.Email:
                                        <DefaultTextField @bind-Value="Register.Email" Label="@T(nameof(Register.Email))" Height="58" Class="mb-6" />
                                        break;
                                    default: throw new UserFriendlyException(T(""));
                                }
                            }
                        </div>
                        <div class="d-flex">
                            <MButton OnClick="() => context.Validate()" Class="large-button mt-11 mx-auto" Color="primary">
                                @T("Register")
                            </MButton>
                        </div>
                    </MForm>
                </MTabItem>
            </MTabsItems>
        </div>
    </div>
</div>