@page "/operationLog"
@inherits AdminCompontentBase

<PageTitle>
    @T("OperationLog")
</PageTitle>
<div style="height: calc(100vh - 250px);@(OperationLogs.Count<=2?"min-height: calc(100vh - 120px);":"")">
    <AutoHeight AutoClass="mt-6 m-sheet theme--light m-card pa-6 full-height pr-0">
        <HeaderContent>
            <div class="d-flex">
                <DateTimeRangePicker @bind-StartTime=StartTime @bind-EndTime=EndTime />
                <RelativeTime @bind-StartTime=StartTime @bind-EndTime=EndTime Class="ml-6" />
                @*<EnumSimpleSelect @bind-Value="OperationType" TValue="OperationTypes" DefaultText="@T("Please select type")" Class="ml-6" />*@
                <EnumSelect @bind-Value="OperationType" TValue="OperationTypes" Label="@T("OperationType")" Class="ml-6" Style="width: 100px !important;" />
                <MSpacer />
                <UserAutoComplete @bind-Value="UserId" FillBackground=false Class="ml-6" Style="width: 134px !important;" />
                <SearchTextField @bind-Value="Search" FillBackground=false Class="ml-6" Style="width: 134px !important;" />
            </div>        
        </HeaderContent>
        <AutoHeightContent>
            <div class="overflow-y full-height pr-4">
                @foreach (var log in OperationLogs)
                {
                    <div class="d-flex mb-6" style="height:36px;">
                        <div class="mr-1 h5 regular--text">@log.OperationTime.ToString("MM-dd")</div>
                        <div class="mt-auto body regular3--text">@log.OperationTime.ToString("HH:mm:ss")</div>
                    </div>
                    <div>
                        @foreach (var (key, value) in new List<(string, string)>
                        {
                            (T(nameof(OperationLogDto.Operator)),log.OperatorName),
                            (T(nameof(OperationLogDto.OperationType)),@T(log.OperationType.ToString())),
                            (T(nameof(OperationLogDto.OperationDescription)),@log.OperationDescription)
                        })
                        {
                            <div class="d-flex mb-6">
                                <div class="mr-6" style="max-width:185px;width:185px;">
                                    <div class="body emphasis--text fill-background py-1 px-4" style="height:32px;">
                                        @key
                                    </div>
                                </div>
                                <div class="d-flex body regular--text">
                                    <div class="my-auto">：@value</div>
                                </div>
                            </div>
                        }
                    </div>
                    <MDivider Class="mb-6" />
                }
            </div>

        </AutoHeightContent>
        <FooterContent>
            <Pagination Class="mt-6" @bind-Page="Page" @bind-PageSize=PageSize Total=Total />
        </FooterContent>
    </AutoHeight>
</div>
