@inherits AdminCompontentBase

<DefaultSheetDialog Value="Visible" ValueChanged=UpdateVisible Title="@T("User roles and permissions settings")">
    <AutoHeight Overflow>
        <HeaderContent>
            <div class="height:55px;">
                <RoleSelectForUser Class="mb-13" @bind-Value="Authorization.Roles" />
            </div>
        </HeaderContent>
        <AutoHeightContent>
            <div class="global-nav" style="display: flex;height: auto">
                @*<PermissionExtensionConfigure 
                                RoleIds=Authorization.Roles 
                                @bind-ExtensionValue=Authorization.Permissions 
                                @bind-Preview=Preview
                                Style="max-height:calc(100vh - 350px);" />*@
                <PermissionsConfigure RoleIds=Authorization.Roles
                                              Value="Authorization.Permissions.Select(p => p.PermissionId).ToList()"
                                              ValueChanged="value => Authorization.Permissions=value.Select(item => new UserPermissionDto(item,true)).ToList()"
                                              @bind-Preview=Preview
                                              Style="max-height:calc(100vh - 350px);" />
            </div>
        </AutoHeightContent>
        <FooterContent>
            <div class="d-flex mt-6">
                <MSpacer></MSpacer>
                <DefaultButton Medium Outlined OnClick="() => Preview = true">@T("Preview")</DefaultButton>
                <DefaultButton Medium Class="ml-6" OnClick="async () => await UpdateAuthorizationAsync()">@T("Submit")</DefaultButton>
            </div>
        </FooterContent>
    </AutoHeight>
</DefaultSheetDialog>
