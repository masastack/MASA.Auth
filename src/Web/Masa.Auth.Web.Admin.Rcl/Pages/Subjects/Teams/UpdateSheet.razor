@inherits AdminCompontentBase

<SSheetDialog @bind-Value=_visible Title="@T("Update Team")" ContentClass="px-sheet-dialog">
    <SElevationTab Dense Style="height: calc(100% - 80px);" Class="pt-12" @bind-Tab="@_tab" Tabs='_tabs' ItemsClass="mt-8 full-height">
        <SElevationTabItem>
            @*<MCard Class="d-flex flex-column full-height">*@
            <TeamBasicInfo @bind-Value="Dto.TeamBasicInfo" />
            @*</MCard>*@
        </SElevationTabItem>
        <SElevationTabItem>
            @if (_visible)
            {
                <TeamAdmin IgnoreStaffIds="Dto.TeamMember.Staffs" @bind-Preview=_adminPreview @bind-Value="Dto.TeamAdmin" />
            }
        </SElevationTabItem>
        <SElevationTabItem>
            @if (_visible)
            {
                <TeamMember ScopePermissions="Dto.TeamAdmin.Permissions.Select(p=>p.PermissionId).ToList()" 
                    IgnoreStaffIds="Dto.TeamAdmin.Staffs" @bind-Preview=_memberPreview @bind-Value="Dto.TeamMember" />
            }
        </SElevationTabItem>
    </SElevationTab>
    <MCardActions class="d-flex align-center mb-10 px-6">
        <MButton Text Color="error" MinWidth="100" OnClick="OnDeleteHandler">
            @T("Delete")
        </MButton>
        <MSpacer />
        @if (_tabs.IndexOf(_tab)>0)
        {
            <SButton Medium Class="mr-4" OnClick="()=>{_adminPreview = true;}">@T("Preview")</SButton>
        }
        <SButton Medium MinWidth="100" OnClick="OnUpdateHandler">@T("Save")</SButton>
    </MCardActions>
</SSheetDialog>