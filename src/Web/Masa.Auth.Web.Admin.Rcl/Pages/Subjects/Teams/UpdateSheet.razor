@inherits AdminCompontentBase

<DefaultSheetDialog @bind-Value=_visible Title="@T("Edit Team")">
    <SElevationTab Dense Style="height: calc(100% - 40px);" @bind-Tab="@_tab" Tabs='_tabs' ItemsClass="mt-8 full-height">
        <SElevationTabItem>
            <TeamBasicInfo @bind-Value="Dto.TeamBasicInfo" />
        </SElevationTabItem>
        <SElevationTabItem>
            @if (_visible)
            {
                <TeamAdmin IgnoreStaffIds="Dto.TeamMember.Staffs" @bind-Preview=_adminPreview @bind-Value="Dto.TeamAdmin" />
            }
        </SElevationTabItem>
        <SElevationTabItem>
            @if (_visible)
            {
                <TeamMember ScopePermissions="Dto.TeamAdmin.Permissions" 
                    ScopeRoles="Dto.TeamAdmin.Roles"
                    IgnoreStaffIds="Dto.TeamAdmin.Staffs" @bind-Preview=_memberPreview @bind-Value="Dto.TeamMember" />
            }
        </SElevationTabItem>
    </SElevationTab>
    <MCardActions class="d-flex align-center px-6">
        <MButton Text Color="error" MinWidth="100" OnClick="OnDeleteHandler">
            @T("Delete")
        </MButton>
        <MSpacer />
        @if (_tabs.IndexOf(_tab)>0)  
        {
            <SButton Medium Class="mr-4" OnClick="()=>{_adminPreview = true;}">@T("Preview")</SButton>
        }
        <SButton Medium MinWidth="100" OnClick="OnUpdateHandler">@T("Save")</SButton>
    </MCardActions>
</DefaultSheetDialog>