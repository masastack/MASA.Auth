@inherits AdminCompontentBase

<DefaultSheetDialog @bind-Value=_visible Title="@T("Create Team")">
    <MStepper Value="_step" Elevation=0 Class="d-flex flex-column full-height">
        <MStepperHeader Class="mx-6" Style="box-shadow:none !important">
            <MStepperStep Step="1" Complete="_step>1">
                @T("Fill the basic team information")
            </MStepperStep>
            <MDivider></MDivider>
            <MStepperStep Step="2" Complete="_step>2">
                @T("Setup team admins")
            </MStepperStep>
            <MDivider></MDivider>
            <MStepperStep Step="3">
                @T("Setup team members")
            </MStepperStep>
        </MStepperHeader>
        <MStepperItems Class="flex-grow-1">
            <MStepperContent class="full-height" Step="1">
                <MCard Class="mx-auto d-flex flex-column full-height">
                    <TeamBasicInfo @bind-Value="_teamDetailDto.TeamBasicInfo" />
                    <MCardActions class="d-flex justify-end align-center">
                        <SButton Medium Disabled="@string.IsNullOrWhiteSpace(_teamDetailDto.TeamBasicInfo.Name)" OnClick="()=>{ _step++; }">@T("Next step")</SButton>
                    </MCardActions>
                </MCard>
            </MStepperContent>
            <MStepperContent class="full-height" Step="2">
                <MCard Class="mx-auto d-flex flex-column full-height">
                    <TeamAdmin IgnoreStaffIds="_teamDetailDto.TeamMember.Staffs" @bind-Value="_teamDetailDto.TeamAdmin" />
                    <MCardActions class="d-flex justify-end align-center">
                        <SButton Medium Class="mr-4" OnClick="()=> _step-- ">@T("Previous step")</SButton>
                        <SButton Medium OnClick="()=> _step++ ">@T("Next step")</SButton>
                    </MCardActions>
                </MCard>
            </MStepperContent>
            <MStepperContent class="full-height" Step="3">
                <MCard Class="mx-auto d-flex flex-column full-height">
                    <TeamMember ScopePermissions="_teamDetailDto.TeamAdmin.Permissions" 
                        ScopeRoles="_teamDetailDto.TeamAdmin.Roles"
                        IgnoreStaffIds="_teamDetailDto.TeamAdmin.Staffs" @bind-Value="_teamDetailDto.TeamMember" />
                    <MCardActions class="d-flex justify-end align-center">
                        <SButton Medium class="mr-4" OnClick="()=> _step-- ">@T("Previous step")</SButton>
                        <SButton Medium OnClick="OnSubmitHandler">@T("Submit")</SButton>
                    </MCardActions>
                </MCard>
            </MStepperContent>
        </MStepperItems>
    </MStepper>
</DefaultSheetDialog>