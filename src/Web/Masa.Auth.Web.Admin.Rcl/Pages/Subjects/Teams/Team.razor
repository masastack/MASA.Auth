@inherits AdminCompontentBase
@page "/team/index"

<PageTitle>@T("Team")</PageTitle>

<MCard Class="full-height">
    <MCardTitle class="mx-2 py-6">
        <DefaultTextField @bind-Value="_search" Placeholder="@T("Search")" OnKeyDown="SearchKeyDown"
                          Style="max-width:340px;" PrependInnerIcon="mdi-magnify" HideDetails=true>
        </DefaultTextField>
    </MCardTitle>
    <MCardText Style="overflow-y:auto;">
        <MRow>
            @foreach (var team in _teams)
            {
                <MCol Md="4">
                    <TeamCard Team=team OnEditClick="()=>EditTeamHandler(team.Id)" />
                </MCol>
            }
            <MCol Md="4">
                <MCard Outlined class="d-flex justify-center align-center" Style="border-style: dashed;" Height="230">
                    <MButton OnClick="()=> _showAdd = true" Ripple=false Plain><MIcon Left>mdi-plus</MIcon>@T("Create Team")</MButton>
                </MCard>
            </MCol>
        </MRow>
    </MCardText>
</MCard>

<AddSheet @bind-Show=_showAdd OnSubmit="OnCreate" />
<UpdateSheet @bind-Show=_showEdit Dto=_editTeamDto OnUpdateBase="OnUpdateBasicInfo"
             OnUpdateAdmin="OnUpdateAdminPersonnel" OnUpdateMember="OnUpdateMemberPersonnel" OnDelete="OnDelete" />